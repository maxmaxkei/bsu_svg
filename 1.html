<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
    	#orange-circle:hover {
			fill: chocolate;
    	}
		.draggable {
			cursor: move;
		}
    </style>
</head>
<body>

<!-- 1.1.Изучить структуру элемента <svg> (раздел 5.1.2) и атрибута viewBox (7.7). 
Проверить, что пример из раздела 7.7 спецификации правилно отображаются в веб браузере. -->
	<div>
		<p>1.1</p>
		<svg width="300px" height="200px" version="1.1"
		viewBox="0 0 1500 1000" preserveAspectRatio="none"
		xmlns="http://www.w3.org/2000/svg">
			<desc>Example ViewBox - uses the viewBox
			attribute to automatically create an initial user coordinate
			system which causes the graphic to scale to fit into the
			viewport no matter what size the viewport is.</desc>
			<!-- This rectangle goes from (0,0) to (1500,1000) in user space.
			Because of the viewBox attribute above,
			the rectangle will end up filling the entire area
			reserved for the SVG content. -->
			<rect x="0" y="0" width="1500" height="1000"
			fill="yellow" stroke="blue" stroke-width="12" />
			<!-- A large, red triangle -->
			<path fill="red" d="M 750,100 L 250,900 L 1250,900 z"/>
			<!-- A text string that spans most of the viewport -->
			<text x="100" y="600" font-size="200" font-family="Verdana" >
			Stretch to fit
			</text>
		</svg>
	</div>

<!-- 1.2.Ознакомиться с разделами 8.1, 8.2, 8.3.1-8.3.4 документации SVG. 
Нарисовать пятиугольную звезду при помощи элемента <path>. -->
	<div>
		<p>1.2</p>
		<svg width="500" height="500">
			<path stroke="blue" fill="gray" stroke-width="3" 
			d="M 130,0 L 160,130 L 290,130 L 180,200 L 290,320 L 130,240 L 0,320 L 90,200 L 0,130 L 100,130 z"/>
		</svg>
	</div>

<!-- 1.3.Ознакомиться с заданием кубических кривых (кривых Безье) в синтаксисе SVG (разделы 8.3.5, 8.3.6). 
Приближенно нарисовать один период синусоды.  -->
	<div>
		<p>1.3</p>
		<svg width="500" height="500" xmlns="http://www.w3.org/2000/svg">
			<path d="M 40,140 C 40 280, 80 280, 80 140 S 120 0, 120 140" 
				stroke="black" stroke-width="3"  fill="transparent"/>
		</svg>
	</div>

<!-- 1.4.Ознакомиться с заданием дуг эллипсов по разделу 8.3.8. 
Нарисовать секторы окружности с углами 90% и 30%.  -->
	<div>
		<p>1.4</p>
		<svg width="500" height="200">
			<path d="M275,175 v-150 a150,150 0 0,0 -150,150 z"fill="yellow" stroke="blue" stroke-width="5" />
		</svg>
		<svg width="500" height="200">
			<path d="M275,175 v-150 a150,150 0 0,0 -50,8 z"fill="yellow" stroke="blue" stroke-width="5" />
		</svg>
	</div>

<!-- 1.5.Ознакомиться с описанием элемента <text> (раздел 10.4). 
Нарисовать строку “Hello, World!” двумя разными шрифтами в 2 различных размерах. -->
	<div>
		<p>1.5</p>
		<svg> 
			<text x="10" y="30" font-family="Verdana" font-size="25" fill="blue" >
				Hello, World!
			</text> 
		</svg> 
		<svg> 
			<text y="30" font-family="Georgia" font-size="10" fill="blue" >
				Hello, World!
			</text> 
		</svg> 
	</div>

<!-- 1.6.Ознакомиться с описанием элемента <tspan> (раздел 10.5). Нарисовать строку “This is an example of bold, italic and bold-italic” двумя способами – 
с явным указанием атрибута font и используя атрибуты font-family, font-style и font-weight (раздел 10.10). -->
	<div>
		<p>1.6</p>
		<svg width="500"> 
  			<text x="0" y="15">
  				This is an example of <tspan font-weight="bold">bold</tspan>, <tspan font-style="italic">italic</tspan> and 
  				<tspan font-style="italic" font-weight="bold">bold-italic
			</text>
		</svg>
		<br>
		<!-- не понятно как просто через font сделать-->
	</div>

<!-- 1.7.Используя атрибуты dx и dy нарисовать строку BSU™. -->
	<div>
		<p>1.7</p>
		<svg width="500">
			<text x="0" y="15">
				<tspan dx="0" dy="0" font-weight="bold">
					B
				</tspan>
				<tspan dx="-3" dy="0" font-weight="bold">
					S
				</tspan>
				<tspan dx="-3" dy="0" font-weight="bold">
					U
				</tspan>
				<tspan dx="-3" dy="-7" font-size="6">
					TM
				</tspan>
			</text>
		</svg>
	</div>

<!-- 1.8.Ознакомиться с различными модификациями текста, указанными в разделе 10.12. 
Нарисовать строку “This is an example of the underlined text”. -->
	<div>
		<p>1.8</p>
		<svg width="500">
			<text x="0" y="15">
				This is an example of the 
				<tspan text-decoration="underline">underlined</tspan>
				text
			</text>
		</svg>
	</div>

<!-- ========================================================================================================================================================= -->

<!-- 3.1. Ознакомиться с принципами анимации в SVG и элементом <animate> (пример 19.2.3 и радел 19.2.12). 
Нарисовать пульсирующую окружность, радиус которой непрерывно меняется от минимального до максимального 
значения и затем опять до минимального с бесконечным повторением (см. раздел 19.8.2).  -->

<!-- 3.2. Познакомиться с обработкой пользовательских событий в SVG (разделы 18.2 и 18.3). Реализовать изменение цвета (затемнение) 
окружности при наведении мышки на нее и появление / удаление границы окружности по клику мышки (эффект выделения объекта). -->

<!-- 3.3. Познакомиться с обработкой событий для перемещения объектов (drag and drop): http://www.petercollingridge.co.uk/interactive-svg-components/draggable-svg-element . Реализовать поддержку перемещения окружности из пункта 3.2 -->

	<div>
		<p>3.1</p>
		<svg width="500" height="500" onload="drag(evt)">
			<animate 
			       xlink:href="#orange-circle"
			       attributeName="r"
			       from="30"
			       to="70"
			       values="30; 70; 30"
			       keyTimes="0; 0.5; 1"
			       dur="2s"
			       begin="0s"
			       fill="freeze" 
			       repeatCount="indefinite"/>
	       	<circle id="orange-circle" r="30" cx="70" cy="70" 
	       			fill="orange"
	       			class="draggable"
	       			stroke-width="0" stroke="black"
	       			onclick="addBorder(event)"/>
		</svg>
	</div>

	<script type="text/javascript">

		const drag = (e) => {

			const getPointerPosition = (e) => {
				return {
					x: (e.clientX) ,
					y: (e.clientY) 
				};
			}

			let selectedElement, offset;

			const startDrag = (e) => {
				if (e.target.classList.contains('draggable')) {
					selectedElement = e.target;
					offset = getPointerPosition(e);
					offset.x -= selectedElement.getAttributeNS(null, "cx");
					offset.y -= selectedElement.getAttributeNS(null, "cy");
				}
			}

			const drag = (e) => {
				if (selectedElement) {
					let coord = getPointerPosition(e);
					selectedElement.setAttributeNS(null, "cx", coord.x - offset.x);
					selectedElement.setAttributeNS(null, "cy", coord.y - offset.y);
				}
			}

			const endDrag = (e) => {
				selectedElement = null;
			}

			e.target.addEventListener('mousedown', startDrag);
			e.target.addEventListener('mousemove', drag);
			e.target.addEventListener('mouseup', endDrag);

		}

		const addBorder = (e) => {
			e.target.getAttribute("stroke-width") == 0 ?
				e.target.setAttribute("stroke-width", 3) : e.target.setAttribute("stroke-width", 0);
		} 
	</script>

</body>
</html>
